<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"    content="width=device-width">
    <meta name="author"      content="M A Eyler, Istanbul, 2020" />
    <meta name="description" content="Reader for the Quran" />
    <link rel="icon" href="image/icon.png">
    <title>Kuran-ı Kerim </title>

  <style>
    body { max-width: 440px; }
    body, h2, h3 { margin: 20px; }
    h2 { margin-bottom: 16px; }
    body, input, button { 
      font: 16px arial;
    }
    div {
      display: inline-block; width: 120px;
      vertical-align: top;
    }
    #text { width: 90%; max-width: 340px; }
    #page, #root, #cv { width: 90px; }
    #search { background-color: yellow; }
    button {
      border: 3px solid gray;
      border-radius: 8px;
    }
  </style>
</head>

<body>

<h2 id=title title='innehû lequr-ânun kerîm &#010;fî kitâbin meknûn'></h2>
Bu yazılım ile Kuran-ı Kerim'de kelimeler arayabilir, istenen sayfayı  
açabilir ya da Mucem'de kelime köklerini bulabilirsiniz.
<hr />
<p><label>
Arapça/Türkçe/İngilizce (Finder) <br>
<input type=text id=text placeholder='Aranacak metin'
title='Bu alana girilen metin Finder yazılımı ile aranır'>
</p>
<p>
<div><label>
Sayfa (Iqra) <br>
<input type=number id=page placeholder='1-604'
title='1-604 aralığında sayfa numarası'>
<br><br>
<label>
Kök (Mucem) <br>
<input type=text id=root placeholder='ktb Elm'
title='Birden fazla kök aranacaksa boşluk ile ayrılmalı'>
</div>
<div><label>
Sure:Ayet <br>
<input type=text id=cv placeholder='27:30'
title='Sure ve ayet numaraları ":" ile ayrılmalı'>
<br><br><br>
<button id=search title='Girilen bütün değerler kullanılır'>Ara</button>
<button id=clear title='Girilen bütün değerler silinir' hidden>Sil</button>
</div>
</p>
<hr />
<p></p>

<script src="code/common.js"></script>
<script>
"use strict";
function doRoot(h) {
    let t = root.value.split(/\s+/).join('&r=')
    if (!h) {
      window.open('mujam.html#r='+t, 'finder'); return ''
    }
    return h+'&r='+t
}
function doText(h) {
    let t = text.value
    if (!h) {
      window.open(FINDER+'#t='+t, 'finder'); return ''
    }
    return h+'&b='+t
}
function doOpen(h) {
    if (!h) return
    if (parent.iqra)
      parent.iqra.location.hash = h
    else window.open('reader.html#'+h, 'iqra')
}
function doSearch() {
    let h = ''
    if (cv.value) h += 'v='+cv.value
    else if (page.value) h += 'p='+page.value
    if (root.value) {
      let d = doRoot(h)
      if (!d) return; h = d
    }
    if (text.value) {
      let d = doText(h)
      if (!d) return; h = d
    }
    doOpen(h); clear.hidden = false
}
function clearAll() {
  document.querySelectorAll('input').forEach(x => x.value='')
  clear.hidden = true
}
function keyToPage(evt) {
    if (evt.key == 'Enter') 
      switch (evt.target) {
        case root:
          doRoot(); break;
        case text:
          doText(); break;
        case page:
          doOpen('p='+page.value); break;
        case cv:
          doOpen('v='+cv.value); break;
      }
}
    title.innerText = document.title
    search.onclick = doSearch
    clear.onclick = clearAll
    document.onkeydown = keyToPage
</script>

</body>
</html>
